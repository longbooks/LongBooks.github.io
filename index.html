<!DOCTYPE html>
<html>
    <head>
        <script src="https://accounts.google.com/gsi/client" async defer></script>
    </head>
    <body>
        <script>
            function authenticate() {
                var output =google.accounts.oauth2.initTokenClient({
                    client_id: '141290470186-e63pmerr4gft8cep5gptbbjlo3gcqn5u.apps.googleusercontent.com',
                    scope: 'https://www.googleapis.com/auth/youtube.readonly',
                });
                console.log(output);
            }

            function loadClient() {
                gapi.client.setApiKey("AIzaSyBTJnaY-IbClJu84zEEv1lGYQlXHvQeLu0");
                return gapi.client.load("https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest")
                .then(function() { console.log("GAPI client loaded for API"); },
                function(err) { console.error("Error loading GAPI client for API", err); });
            }

            function execute() {
                return gapi.client.youtube.channels.list({
                    "part":[
                        "snippet,contentDetails,statistics"
                    ],
                    "mine": true
                })
                .then(function(response) {
                    // Handle the results here (response.result has the parsed body).
                    console.log("Response", response);
                },
                function(err) { 
                    console.error("Execute error", err);
                 });
            }
        </script>
        <button onclick="authenticate().then(loadClient)">authorize and load</button>
        <button onclick="execute()">execute</button>
    </body>
</html>
