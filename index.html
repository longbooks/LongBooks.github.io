<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Youtube my data Clone</title>        
    <script async defer src="https://apis.google.com/js/api.js"
        onload="handleClientLoad()">
    </script>
</head>
<body>
    <button id="authorize-button">authorize-button</button>
    <button id="signout-button">signout-button</button>
<script>
    const CLIENT_ID = '316244741974-m4otm3490uhieom1ovcn0n00v2eq5c9j.apps.googleusercontent.com';
    const DISCOVERY_DOCS = ['https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest'];
    const SCOPES = 'https://www.googleapis.com/auth/youtube.readonly';

    const authorizeButton = document.getElementById('authorize-button');
    const signoutButton = document.getElementById('signout-button');

    function handleClientLoad() {
        gapi.load('client:auth2', initClient);
    }

    function initClient() {
        gapi.client.init({
            discoveryDocs: DISCOVERY_DOCS,
            clientId: CLIENT_ID,
            scope: SCOPES
        })
        .then(() => {
            gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
            updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
            authorizeButton.onclick = handleAuthClick;
            signoutButton.onclick = handleSignoutClick;
        });
    }

    function updateSigninStatus(isSignedIn) {
        if (isSignedIn) {
            channelsListMine('snippet,contentDetails,statistics',true);
        }
    }
    
    function handleAuthClick() {
        gapi.auth2.getAuthInstance().signIn();
    }

    function handleSignoutClick() {
        gapi.auth2.getAuthInstance().signOut();
    }

    function channelsListMine(part, mine) {
        gapi.client.youtube.channels
        .list(part,{'mine': mine})
        .then(response => {
            console.log(response);
            const channel = response.result.items[0];
            console.log(channel);
        })
    }
</script>
</body>
</html>
